{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Activities</title>

  <!-- âœ… Bootstrap Core + Icons -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    rel="stylesheet">
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">

  <style>
    body { background-color: #f8f9fa; }
    .card { border-radius: .6rem; overflow: hidden; }
    .card-header { 
        font-weight: 600; 
        display: flex; 
        align-items: center; 
        justify-content: space-between; 
    }
    .list-group-item { border: none; border-bottom: 1px solid rgba(0,0,0,.05); }
    .list-group-item:last-child { border-bottom: none; }
    .timeline-type { font-size: .9rem; opacity: .8; }
    .user-badge {
        font-size: .8rem;
        font-weight: 500;
        background-color: rgba(255,255,255,0.15);
        border-radius: .4rem;
        padding: .25rem .6rem;
    }
  </style>
</head>

<body>
<div class="container my-5">

  {% for activity in activities %}
    {% if activity.activity_type == 'goodreads' %}
      <div class="card mb-4 shadow-sm border-0">
        <div class="card-header bg-primary text-white">
          <div>
            <i class="bi bi-book me-2"></i>Goodreads
            <span class="timeline-type text-white-50 ms-2">Books</span>
          </div>
          <div class="user-badge">
            <i class="bi bi-person me-1"></i>{{ activity.user.username }}
          </div>
        </div>
        <ul class="list-group list-group-flush">
          {% for item in activity.activity_detail %}
            <li class="list-group-item d-flex justify-content-between align-items-center">
              <div>
                <h6 class="mb-1 fw-semibold">{{ item.title }}</h6>
                <small class="text-muted">{{ item.author }}</small>
              </div>
              <span class="badge bg-light text-dark border">
                <i class="bi bi-calendar-event me-1"></i>{{ item.read_data }}
              </span>
            </li>
          {% endfor %}
        </ul>
      </div>

    {% elif activity.activity_type == 'trakt' %}
      <div class="card mb-4 shadow-sm border-0">
        <div class="card-header bg-danger text-white">
          <div>
            <i class="bi bi-film me-2"></i>Trakt
            <span class="timeline-type text-white-50 ms-2">Movies / Shows</span>
          </div>
          <div class="user-badge">
            <i class="bi bi-person me-1"></i>{{ activity.user.username }}
          </div>
        </div>
        <ul class="list-group list-group-flush">
          {% for item in activity.activity_detail %}
            <li class="list-group-item d-flex justify-content-between align-items-center">
              <div>
                <h6 class="mb-1 fw-semibold">{{ item.title }}</h6>
                <small class="text-muted text-capitalize">{{ item.type }}</small>
              </div>
              <span class="badge bg-light text-dark border">
                <i class="bi bi-clock-history me-1"></i>{{ item.watched_at }}
              </span>
            </li>
          {% endfor %}
        </ul>
      </div>
    {% endif %}
  {% endfor %}

</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
